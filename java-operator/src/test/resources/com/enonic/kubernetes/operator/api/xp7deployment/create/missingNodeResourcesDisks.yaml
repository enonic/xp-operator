admissionRequest:
  request:
    operation: CREATE
    object:
      apiVersion: enonic.cloud/v1alpha2
      kind: Xp7Deployment
      metadata:
        name: mycloud-mysolution-myenv-myservice2
        namespace: mycloud-mysolution-myenv-myservice2
        labels:
          cloud: mycloud
          project: myproject
          name: qaxp
      spec:
        enabled: true
        xpVersion: 7.7.0
        nodesSharedDisks:
          - name: blobstore
            size: 1Gi
          - name: snapshots
            size: 1Gi
        nodeGroups:
          - name: main
            master: true
            data: true
            replicas: 1
            resources:
              cpu: "1"
              memory: 512Mi
  #            disks:
  #              index: 200Mi

assertException: "nodes with data=true must have disk 'index' defined"
